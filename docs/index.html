<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <!-- Set doc-js class before any render so CSS initial states apply immediately -->
  <script>document.documentElement.classList.add('doc-js');</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Design System — Documentation</title>

  <!--
    CASCADE LAYER ORDER — declared before any stylesheet loads.
    ─────────────────────────────────────────────────────────────────────────
    Priority (lowest → highest):
      tokens < base < doc-shell < utilities < components < themes < adapters

    doc-shell sits AFTER base so doc layout rules are not wiped by the
    base reset (* { margin:0; padding:0 }).
    doc-shell sits BEFORE components so DS component styles always win.
    ─────────────────────────────────────────────────────────────────────────
  -->
  <style>
    @layer tokens, base, doc-shell, utilities, components, themes, adapters;
  </style>

  <!--
    CSS LOAD ORDER
    ─────────────────────────────────────────────────────────────────────────
    1. ds-preview.css   →  compiled DS output (tokens + base + components + themes)
    2. docs.css         →  documentation shell chrome — wrapped in @layer doc-shell
                           Uses --doc-* namespace; never overrides DS-layered rules.
    ─────────────────────────────────────────────────────────────────────────
  -->
  <link rel="stylesheet" href="../preview/css/ds-preview.css">
  <link rel="stylesheet" href="css/docs.css">
</head>

<body>

<!-- ═══════════════════════════════════════════════════════════════════════════
     SHELL
     ═══════════════════════════════════════════════════════════════════════════ -->
<div class="doc-shell">

  <!-- ── Header ──────────────────────────────────────────────────────────── -->
  <header class="doc-header" role="banner">
    <div class="doc-header__inner">
      <div class="doc-header__brand">
        <span class="doc-header__mark" aria-hidden="true">DS</span>
        <div>
          <div class="doc-header__title">Design System</div>
          <div class="doc-header__subtitle">Static Documentation — Phase 8</div>
        </div>
      </div>
      <nav class="doc-header__nav" aria-label="Architecture layers">
        <span class="doc-layer-badge doc-layer-badge--tokens">tokens</span>
        <span class="doc-layer-arrow" aria-hidden="true">→</span>
        <span class="doc-layer-badge doc-layer-badge--base">base</span>
        <span class="doc-layer-arrow" aria-hidden="true">→</span>
        <span class="doc-layer-badge doc-layer-badge--utils">utilities</span>
        <span class="doc-layer-arrow" aria-hidden="true">→</span>
        <span class="doc-layer-badge doc-layer-badge--components">components</span>
        <span class="doc-layer-arrow" aria-hidden="true">→</span>
        <span class="doc-layer-badge doc-layer-badge--themes">themes</span>
        <span class="doc-layer-arrow" aria-hidden="true">→</span>
        <span class="doc-layer-badge doc-layer-badge--adapters">adapters</span>
      </nav>
    </div>
  </header>

  <!-- ── Body ─────────────────────────────────────────────────────────────── -->
  <div class="doc-body">

    <!-- ── Sidebar ─────────────────────────────────────────────────────────── -->
    <aside class="doc-sidebar" aria-label="Documentation navigation">
      <div class="doc-sidebar__section">
        <div class="doc-sidebar__label">Layer</div>
        <div class="doc-sidebar__layer-pill">components</div>
      </div>
      <div class="doc-sidebar__section">
        <div class="doc-sidebar__label">Component</div>
        <nav>
          <a href="#button" class="doc-sidebar__link doc-sidebar__link--active">
            Button
            <span class="doc-sidebar__version">v1.2</span>
          </a>
        </nav>
      </div>
      <div class="doc-sidebar__section">
        <div class="doc-sidebar__label">On this page</div>
        <nav class="doc-toc">
          <a href="#section-overview"    class="doc-toc__link">Overview</a>
          <a href="#section-variants"    class="doc-toc__link">Variants</a>
          <a href="#section-sizes"       class="doc-toc__link">Sizes</a>
          <a href="#section-states"      class="doc-toc__link">States</a>
          <a href="#section-token-flow"  class="doc-toc__link">Token flow</a>
          <a href="#section-arch"        class="doc-toc__link">Architecture rules</a>
        </nav>
      </div>
    </aside>

    <!-- ── Main ──────────────────────────────────────────────────────────── -->
    <main class="doc-main" id="button">

      <!-- ── Overview ─────────────────────────────────────────────────────── -->
      <section class="doc-section" id="section-overview">
        <div class="doc-section__header">
          <h1 class="doc-section__title">Button</h1>
          <span class="doc-section__badge">components layer</span>
        </div>
        <p class="doc-section__desc">
          The Button component is the reference implementation for the
          <strong>token-only architecture</strong>. All visual values are resolved
          through <code>--component-button-*</code> variables. No raw values, no
          direct semantic or primitive references are allowed inside
          <code>_button.scss</code>.
        </p>

        <div class="doc-callout doc-callout--info">
          <div class="doc-callout__label">Token flow</div>
          <div class="doc-callout__flow">
            <code>_primitives.color.scss</code>
            <span aria-hidden="true">→</span>
            <code>_semantic.color.scss</code>
            <span aria-hidden="true">→</span>
            <code>_button.variables.scss</code>
            <span aria-hidden="true">→</span>
            <code>_button.scss</code>
          </div>
        </div>

        <table class="doc-meta-table">
          <tbody>
            <tr>
              <th>BEM block</th>
              <td><code>.ds-btn</code></td>
            </tr>
            <tr>
              <th>Layer</th>
              <td><code>@layer components</code></td>
            </tr>
            <tr>
              <th>CSS file</th>
              <td><code>scss/components/button/_button.scss</code></td>
            </tr>
            <tr>
              <th>Variables file</th>
              <td><code>scss/components/button/_button.variables.scss</code></td>
            </tr>
            <tr>
              <th>Theming API</th>
              <td>Override <code>--component-button-*</code> in <code>[data-theme]</code> or adapter scope only</td>
            </tr>
            <tr>
              <th>Forbidden inside</th>
              <td><code>--primitive-*</code>, <code>--semantic-*</code>, raw hex/rgb, utility class names</td>
            </tr>
          </tbody>
        </table>
      </section>
      <!-- /Overview -->

      <!-- ── Variants ─────────────────────────────────────────────────────── -->
      <section class="doc-section" id="section-variants">
        <h2 class="doc-section__title">Variants</h2>
        <p class="doc-section__desc">
          Each variant maps to a distinct set of <code>--component-button-{variant}-*</code>
          tokens. Variants are mutually exclusive — apply exactly one per instance.
        </p>

        <div class="doc-demo-grid doc-demo-grid--variants">

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <code>.ds-btn--primary</code>
              <span class="doc-demo-row__desc">Brand-filled · Highest weight</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--md" type="button">
                <span class="ds-btn__label">Primary</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <code>.ds-btn--secondary</code>
              <span class="doc-demo-row__desc">Outlined · Medium weight</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--secondary ds-btn--md" type="button">
                <span class="ds-btn__label">Secondary</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <code>.ds-btn--tertiary</code>
              <span class="doc-demo-row__desc">Tonal · Low weight</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--tertiary ds-btn--md" type="button">
                <span class="ds-btn__label">Tertiary</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <code>.ds-btn--ghost</code>
              <span class="doc-demo-row__desc">Transparent · Lowest weight</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--ghost ds-btn--md" type="button">
                <span class="ds-btn__label">Ghost</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <code>.ds-btn--danger</code>
              <span class="doc-demo-row__desc">Destructive · Red-filled</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--danger ds-btn--md" type="button">
                <span class="ds-btn__label">Danger</span>
              </button>
            </div>
          </div>

        </div>
      </section>
      <!-- /Variants -->

      <!-- ── Sizes ────────────────────────────────────────────────────────── -->
      <section class="doc-section" id="section-sizes">
        <h2 class="doc-section__title">Sizes</h2>
        <p class="doc-section__desc">
          Size modifiers control padding, font-size, and min-height.
          Default is <code>md</code> — always declare a size modifier explicitly.
        </p>

        <div class="doc-demo-grid doc-demo-grid--sizes">

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <code>.ds-btn--sm</code>
              <span class="doc-demo-row__desc">32px min-height</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--sm" type="button">
                <span class="ds-btn__label">Small</span>
              </button>
              <button class="ds-btn ds-btn--secondary ds-btn--sm" type="button">
                <span class="ds-btn__label">Small</span>
              </button>
              <button class="ds-btn ds-btn--ghost ds-btn--sm" type="button">
                <span class="ds-btn__label">Small</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <code>.ds-btn--md</code>
              <span class="doc-demo-row__desc">40px min-height · Default</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--md" type="button">
                <span class="ds-btn__label">Medium</span>
              </button>
              <button class="ds-btn ds-btn--secondary ds-btn--md" type="button">
                <span class="ds-btn__label">Medium</span>
              </button>
              <button class="ds-btn ds-btn--ghost ds-btn--md" type="button">
                <span class="ds-btn__label">Medium</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <code>.ds-btn--lg</code>
              <span class="doc-demo-row__desc">48px min-height</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--lg" type="button">
                <span class="ds-btn__label">Large</span>
              </button>
              <button class="ds-btn ds-btn--secondary ds-btn--lg" type="button">
                <span class="ds-btn__label">Large</span>
              </button>
              <button class="ds-btn ds-btn--ghost ds-btn--lg" type="button">
                <span class="ds-btn__label">Large</span>
              </button>
            </div>
          </div>

        </div>
      </section>
      <!-- /Sizes -->

      <!-- ── States ───────────────────────────────────────────────────────── -->
      <section class="doc-section" id="section-states">
        <h2 class="doc-section__title">States</h2>
        <p class="doc-section__desc">
          Interactive states are handled with CSS pseudo-classes (<code>:hover</code>,
          <code>:focus-visible</code>, <code>:active</code>). Class-based modifiers
          cover non-interactive states.
        </p>

        <div class="doc-demo-grid doc-demo-grid--states">

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <span>Default</span>
              <span class="doc-demo-row__desc">No interaction</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--md" type="button">
                <span class="ds-btn__label">Button</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <span>Hover</span>
              <span class="doc-demo-row__desc"><code>:hover</code> pseudo-class</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--md doc-force-hover" type="button">
                <span class="ds-btn__label">Button</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <span>Focus</span>
              <span class="doc-demo-row__desc"><code>:focus-visible</code> pseudo-class</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--md doc-force-focus" type="button">
                <span class="ds-btn__label">Button</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <span>Active</span>
              <span class="doc-demo-row__desc"><code>:active</code> pseudo-class</span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--md doc-force-active" type="button">
                <span class="ds-btn__label">Button</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <span>Disabled</span>
              <span class="doc-demo-row__desc"><code>:disabled</code> / <code>.ds-btn--disabled</code></span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--md" type="button" disabled>
                <span class="ds-btn__label">Button</span>
              </button>
              <button class="ds-btn ds-btn--secondary ds-btn--md" type="button" disabled>
                <span class="ds-btn__label">Button</span>
              </button>
              <button class="ds-btn ds-btn--danger ds-btn--md" type="button" disabled>
                <span class="ds-btn__label">Button</span>
              </button>
            </div>
          </div>

          <div class="doc-demo-row">
            <div class="doc-demo-row__label">
              <span>Loading</span>
              <span class="doc-demo-row__desc"><code>.ds-btn--loading</code> + <code>aria-busy</code></span>
            </div>
            <div class="doc-demo-row__stage">
              <button class="ds-btn ds-btn--primary ds-btn--md ds-btn--loading" type="button"
                      aria-busy="true" aria-label="Saving…">
                <span class="ds-btn__spinner" aria-hidden="true"></span>
                <span class="ds-btn__label">Saving…</span>
              </button>
              <button class="ds-btn ds-btn--secondary ds-btn--md ds-btn--loading" type="button"
                      aria-busy="true" aria-label="Loading…">
                <span class="ds-btn__spinner" aria-hidden="true"></span>
                <span class="ds-btn__label">Loading…</span>
              </button>
            </div>
          </div>

        </div>

        <!-- State × Variant matrix -->
        <h3 class="doc-section__subtitle">State × Variant matrix</h3>
        <p class="doc-section__desc">
          Hover over each button to verify live state transitions. Focus state
          uses a <code>box-shadow</code> focus ring derived from
          <code>--base-focus-ring-*</code> tokens.
        </p>

        <div class="doc-state-matrix">
          <div class="doc-state-matrix__header">
            <div></div>
            <div>Primary</div><div>Secondary</div><div>Tertiary</div><div>Ghost</div><div>Danger</div>
          </div>
          <div class="doc-state-matrix__row">
            <div class="doc-state-matrix__row-label">Default</div>
            <div><button class="ds-btn ds-btn--primary ds-btn--sm"   type="button"><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--secondary ds-btn--sm" type="button"><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--tertiary ds-btn--sm"  type="button"><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--ghost ds-btn--sm"     type="button"><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--danger ds-btn--sm"    type="button"><span class="ds-btn__label">Btn</span></button></div>
          </div>
          <div class="doc-state-matrix__row">
            <div class="doc-state-matrix__row-label">Disabled</div>
            <div><button class="ds-btn ds-btn--primary ds-btn--sm"   type="button" disabled><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--secondary ds-btn--sm" type="button" disabled><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--tertiary ds-btn--sm"  type="button" disabled><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--ghost ds-btn--sm"     type="button" disabled><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--danger ds-btn--sm"    type="button" disabled><span class="ds-btn__label">Btn</span></button></div>
          </div>
          <div class="doc-state-matrix__row">
            <div class="doc-state-matrix__row-label">Loading</div>
            <div><button class="ds-btn ds-btn--primary ds-btn--sm ds-btn--loading"   type="button" aria-busy="true"><span class="ds-btn__spinner" aria-hidden="true"></span><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--secondary ds-btn--sm ds-btn--loading" type="button" aria-busy="true"><span class="ds-btn__spinner" aria-hidden="true"></span><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--tertiary ds-btn--sm ds-btn--loading"  type="button" aria-busy="true"><span class="ds-btn__spinner" aria-hidden="true"></span><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--ghost ds-btn--sm ds-btn--loading"     type="button" aria-busy="true"><span class="ds-btn__spinner" aria-hidden="true"></span><span class="ds-btn__label">Btn</span></button></div>
            <div><button class="ds-btn ds-btn--danger ds-btn--sm ds-btn--loading"    type="button" aria-busy="true"><span class="ds-btn__spinner" aria-hidden="true"></span><span class="ds-btn__label">Btn</span></button></div>
          </div>
        </div>

      </section>
      <!-- /States -->

      <!-- ── Token Flow ────────────────────────────────────────────────────── -->
      <section class="doc-section" id="section-token-flow">
        <h2 class="doc-section__title">Token flow</h2>
        <p class="doc-section__desc">
          Every component token traces a deterministic path through three layers.
          No component token may reference a primitive directly (except the structural
          exceptions noted). No component token may hold a raw value.
        </p>

        <div class="doc-callout doc-callout--rule">
          <div class="doc-callout__label">Architecture rule</div>
          <div class="doc-callout__body">
            <strong>primitive</strong> → holds raw value (hex, px, rem) ·
            <strong>semantic</strong> → references a primitive · expresses intent ·
            <strong>component</strong> → references a semantic · expresses role ·
            <strong>component.scss</strong> → consumes component token only
          </div>
        </div>

        <!-- Color token flow table -->
        <h3 class="doc-section__subtitle">Color tokens — Primary variant</h3>
        <div class="doc-table-wrap">
          <table class="doc-token-table">
            <thead>
              <tr>
                <th>Role</th>
                <th>Component token</th>
                <th>↓ Semantic token</th>
                <th>↓ Primitive token</th>
                <th>Raw value</th>
                <th>Swatch</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Background</td>
                <td><code>--component-button-primary-bg</code></td>
                <td><code>--semantic-color-brand-default</code></td>
                <td><code>--primitive-color-blue-600</code></td>
                <td><code>#228be6</code></td>
                <td><span class="doc-swatch" style="background:#228be6"></span></td>
              </tr>
              <tr>
                <td>Bg hover</td>
                <td><code>--component-button-primary-bg-hover</code></td>
                <td><code>--semantic-color-brand-hover</code></td>
                <td><code>--primitive-color-blue-700</code></td>
                <td><code>#1c7ed6</code></td>
                <td><span class="doc-swatch" style="background:#1c7ed6"></span></td>
              </tr>
              <tr>
                <td>Bg active</td>
                <td><code>--component-button-primary-bg-active</code></td>
                <td><code>--semantic-color-brand-active</code></td>
                <td><code>--primitive-color-blue-800</code></td>
                <td><code>#1971c2</code></td>
                <td><span class="doc-swatch" style="background:#1971c2"></span></td>
              </tr>
              <tr>
                <td>Bg disabled</td>
                <td><code>--component-button-primary-bg-disabled</code></td>
                <td><code>--semantic-color-interactive-disabled</code></td>
                <td><code>--primitive-color-neutral-300</code></td>
                <td><code>#dee2e6</code></td>
                <td><span class="doc-swatch" style="background:#dee2e6;border:1px solid #ced4da"></span></td>
              </tr>
              <tr>
                <td>Label color</td>
                <td><code>--component-button-primary-color</code></td>
                <td><code>--semantic-color-brand-contrast</code></td>
                <td><code>--primitive-color-neutral-0</code></td>
                <td><code>#ffffff</code></td>
                <td><span class="doc-swatch" style="background:#fff;border:1px solid #dee2e6"></span></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Danger variant -->
        <h3 class="doc-section__subtitle">Color tokens — Danger variant</h3>
        <div class="doc-table-wrap">
          <table class="doc-token-table">
            <thead>
              <tr>
                <th>Role</th>
                <th>Component token</th>
                <th>↓ Semantic token</th>
                <th>↓ Primitive token</th>
                <th>Raw value</th>
                <th>Swatch</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Background</td>
                <td><code>--component-button-danger-bg</code></td>
                <td><code>--semantic-color-feedback-danger-default</code></td>
                <td><code>--primitive-color-red-600</code></td>
                <td><code>#fa5252</code></td>
                <td><span class="doc-swatch" style="background:#fa5252"></span></td>
              </tr>
              <tr>
                <td>Bg hover</td>
                <td><code>--component-button-danger-bg-hover</code></td>
                <td><code>--semantic-color-feedback-danger-hover</code></td>
                <td><code>--primitive-color-red-700</code></td>
                <td><code>#f03e3e</code></td>
                <td><span class="doc-swatch" style="background:#f03e3e"></span></td>
              </tr>
              <tr>
                <td>Bg active</td>
                <td><code>--component-button-danger-bg-active</code></td>
                <td><code>--semantic-color-feedback-danger-active</code></td>
                <td><code>--primitive-color-red-800</code></td>
                <td><code>#e03131</code></td>
                <td><span class="doc-swatch" style="background:#e03131"></span></td>
              </tr>
              <tr>
                <td>Label color</td>
                <td><code>--component-button-danger-color</code></td>
                <td><code>--semantic-color-feedback-danger-contrast</code></td>
                <td><code>--primitive-color-neutral-0</code></td>
                <td><code>#ffffff</code></td>
                <td><span class="doc-swatch" style="background:#fff;border:1px solid #dee2e6"></span></td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Sizing token table -->
        <h3 class="doc-section__subtitle">Sizing &amp; typography tokens</h3>
        <div class="doc-table-wrap">
          <table class="doc-token-table">
            <thead>
              <tr>
                <th>Size / Role</th>
                <th>Component token</th>
                <th>↓ Semantic token</th>
                <th>Resolved value</th>
              </tr>
            </thead>
            <tbody>
              <tr><td>sm / padding-block</td>  <td><code>--component-button-sm-padding-block</code></td>  <td><code>--semantic-spacing-component-xs</code></td>  <td><code>8px</code></td></tr>
              <tr><td>sm / padding-inline</td> <td><code>--component-button-sm-padding-inline</code></td> <td><code>--semantic-spacing-component-sm</code></td>  <td><code>12px</code></td></tr>
              <tr><td>sm / font-size</td>      <td><code>--component-button-sm-font-size</code></td>      <td><code>--semantic-font-size-ui-sm</code></td>        <td><code>12px</code></td></tr>
              <tr><td>sm / font-weight</td>    <td><code>--component-button-sm-font-weight</code></td>    <td><code>--semantic-font-weight-label</code></td>      <td><code>600</code></td></tr>
              <tr class="doc-token-table__divider">
                <td>md / padding-block</td>  <td><code>--component-button-md-padding-block</code></td>  <td><code>--semantic-spacing-component-sm</code></td>  <td><code>12px</code></td></tr>
              <tr><td>md / padding-inline</td> <td><code>--component-button-md-padding-inline</code></td> <td><code>--semantic-spacing-component-md</code></td>  <td><code>16px</code></td></tr>
              <tr><td>md / font-size</td>      <td><code>--component-button-md-font-size</code></td>      <td><code>--semantic-font-size-ui-md</code></td>        <td><code>14px</code></td></tr>
              <tr class="doc-token-table__divider">
                <td>lg / padding-block</td>  <td><code>--component-button-lg-padding-block</code></td>  <td><code>--semantic-spacing-component-md</code></td>  <td><code>16px</code></td></tr>
              <tr><td>lg / padding-inline</td> <td><code>--component-button-lg-padding-inline</code></td> <td><code>--semantic-spacing-component-lg</code></td>  <td><code>24px</code></td></tr>
              <tr><td>lg / font-size</td>      <td><code>--component-button-lg-font-size</code></td>      <td><code>--semantic-font-size-ui-lg</code></td>        <td><code>16px</code></td></tr>
            </tbody>
          </table>
        </div>

        <!-- Structural exceptions callout -->
        <div class="doc-callout doc-callout--warning">
          <div class="doc-callout__label">Structural exceptions</div>
          <div class="doc-callout__body">
            Two component tokens reference primitives directly because no semantic
            shape or spacing layer exists yet:
            <ul>
              <li><code>--component-button-border-radius</code> → <code>--primitive-radius-md</code> (6px)</li>
              <li><code>--component-button-{size}-min-height</code> → <code>--primitive-spacing-{8|10|12}</code></li>
            </ul>
            These are documented exceptions. Once a semantic shape layer is introduced,
            these references must be migrated.
          </div>
        </div>

      </section>
      <!-- /Token Flow -->

      <!-- ── Architecture Rules ─────────────────────────────────────────────── -->
      <section class="doc-section" id="section-arch">
        <h2 class="doc-section__title">Architecture rules</h2>
        <p class="doc-section__desc">
          These rules are enforced by SCSS lint, layer contracts, and build-time checks.
          Violations fail the build.
        </p>

        <div class="doc-rule-list">

          <div class="doc-rule doc-rule--forbidden">
            <div class="doc-rule__icon" aria-label="Forbidden">✕</div>
            <div class="doc-rule__body">
              <strong>No raw values in component SCSS.</strong>
              <span>All visual values must be <code>var(--component-button-*)</code>.</span>
            </div>
          </div>

          <div class="doc-rule doc-rule--forbidden">
            <div class="doc-rule__icon" aria-label="Forbidden">✕</div>
            <div class="doc-rule__body">
              <strong>No <code>--semantic-*</code> or <code>--primitive-*</code> inside <code>_button.scss</code>.</strong>
              <span>These are allowed only in <code>_button.variables.scss</code>.</span>
            </div>
          </div>

          <div class="doc-rule doc-rule--forbidden">
            <div class="doc-rule__icon" aria-label="Forbidden">✕</div>
            <div class="doc-rule__body">
              <strong>No component token overrides in theme files.</strong>
              <span>Themes override semantic tokens only. The component variable file
              re-resolves automatically.</span>
            </div>
          </div>

          <div class="doc-rule doc-rule--forbidden">
            <div class="doc-rule__icon" aria-label="Forbidden">✕</div>
            <div class="doc-rule__body">
              <strong>No adapter selectors (<code>.p-button</code>, <code>[_nghost]</code>) inside component files.</strong>
              <span>Adapters live exclusively in <code>scss/adapters/</code>.</span>
            </div>
          </div>

          <div class="doc-rule doc-rule--allowed">
            <div class="doc-rule__icon" aria-label="Allowed">✓</div>
            <div class="doc-rule__body">
              <strong>Themes change appearance via <code>[data-theme]</code> semantic overrides only.</strong>
              <span>Dark theme overrides <code>--semantic-color-*</code> tokens in <code>_theme-dark.scss</code>.</span>
            </div>
          </div>

          <div class="doc-rule doc-rule--allowed">
            <div class="doc-rule__icon" aria-label="Allowed">✓</div>
            <div class="doc-rule__body">
              <strong>Adapters scope component token overrides to their wrapper selector.</strong>
              <span>PrimeNG adapter overrides <code>--component-button-*</code> inside <code>.p-button-wrapper</code>
              or equivalent scope.</span>
            </div>
          </div>

        </div>
      </section>
      <!-- /Architecture Rules -->

    </main>
    <!-- /Main -->

  </div>
  <!-- /Body -->

</div>
<!-- /Shell -->

<!--
  NOTE ON FORCED STATE CLASSES
  doc-force-hover / doc-force-focus / doc-force-active are documentation-only
  classes that simulate visual states. CSS below in docs.css adds matching
  styles. These classes are never part of the DS component API.
-->

<!-- ═══════════════════════════════════════════════════════════════════════════
     MOTION.JS — Animations + Smooth Scroll
     https://motion.dev  (Motion v11 — ES module via CDN)
     ═══════════════════════════════════════════════════════════════════════════
     Architecture note:
       All animations are additive and respect prefers-reduced-motion.
       Initial opacity:0 states are set with .doc-js CSS class so elements
       are never visible before JS runs — no flash.
       Motion runs entirely outside the DS @layer stack.
     ═══════════════════════════════════════════════════════════════════════════ -->
<script type="module">
import { animate, stagger, inView }
  from 'https://cdn.jsdelivr.net/npm/motion@latest/+esm';

/*
  spring() cannot be used as a CSS `easing` value alongside array keyframes
  in Motion v11 — spring has its own duration model that conflicts.
  Use a bouncy cubic-bezier instead.
*/
const BOUNCE   = 'cubic-bezier(0.34, 1.56, 0.64, 1)';
const EASE_OUT = 'ease-out';

const reduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

/* ─────────────────────────────────────────────────────────────────────────────
   PAGE ENTRANCE — runs once on load
───────────────────────────────────────────────────────────────────────────── */
if (!reduced) {

  // Header drops in from top
  animate('.doc-header',
    { opacity: [0, 1], y: [-8, 0] },
    { duration: 0.4, easing: EASE_OUT }
  );

  // Layer badges — stagger with bouncy easing
  animate('.doc-layer-badge',
    { opacity: [0, 1], y: [6, 0], scale: [0.88, 1] },
    { duration: 0.45, delay: stagger(0.06, { start: 0.18 }), easing: BOUNCE }
  );

  // Sidebar slides in from left
  animate('.doc-sidebar',
    { opacity: [0, 1], x: [-16, 0] },
    { duration: 0.45, delay: 0.12, easing: EASE_OUT }
  );

  // First section (above fold — no scroll needed)
  animate('#section-overview',
    { opacity: [0, 1], y: [18, 0] },
    { duration: 0.5, delay: 0.2, easing: EASE_OUT }
  );

  // TOC links stagger in
  animate('.doc-toc__link',
    { opacity: [0, 1], x: [-8, 0] },
    { duration: 0.3, delay: stagger(0.05, { start: 0.3 }), easing: EASE_OUT }
  );

  /* ───────────────────────────────────────────────────────────────────────────
     SCROLL-DRIVEN ENTRANCE — inView triggers as elements enter the viewport.
     Always pass the DOM element directly (never a selector string to inView
     when the callback needs to reference children).
  ─────────────────────────────────────────────────────────────────────────── */

  // Sections — fade + rise (skip overview, already done above)
  document.querySelectorAll('.doc-section:not(#section-overview)').forEach(el => {
    inView(el,
      () => { animate(el, { opacity: [0, 1], y: [22, 0] }, { duration: 0.48, easing: EASE_OUT }); },
      { amount: 0.06 }
    );
  });

  // Demo rows — stagger inside each grid as it enters
  document.querySelectorAll('.doc-demo-grid').forEach(grid => {
    const rows = grid.querySelectorAll('.doc-demo-row');
    if (!rows.length) return;
    inView(grid,
      () => { animate(rows, { opacity: [0, 1], y: [10, 0] }, { duration: 0.32, delay: stagger(0.07), easing: EASE_OUT }); },
      { amount: 0.04 }
    );
  });

  // Token table rows — slide in from left
  document.querySelectorAll('.doc-token-table').forEach(table => {
    const rows = table.querySelectorAll('tbody tr');
    if (!rows.length) return;
    inView(table,
      () => { animate(rows, { opacity: [0, 1], x: [-8, 0] }, { duration: 0.28, delay: stagger(0.05), easing: EASE_OUT }); },
      { amount: 0.08 }
    );
  });

  // Architecture rule items
  const ruleList = document.querySelector('.doc-rule-list');
  if (ruleList) {
    inView(ruleList,
      () => { animate(ruleList.querySelectorAll('.doc-rule'), { opacity: [0, 1], x: [-10, 0] }, { duration: 0.32, delay: stagger(0.08), easing: EASE_OUT }); },
      { amount: 0.04 }
    );
  }

  // Callouts
  document.querySelectorAll('.doc-callout').forEach(el => {
    inView(el,
      () => { animate(el, { opacity: [0, 1], y: [8, 0] }, { duration: 0.38, easing: EASE_OUT }); },
      { amount: 0.1 }
    );
  });

  // State × Variant matrix rows
  const matrix = document.querySelector('.doc-state-matrix');
  if (matrix) {
    inView(matrix,
      () => { animate(matrix.querySelectorAll('.doc-state-matrix__row'), { opacity: [0, 1], y: [8, 0] }, { duration: 0.3, delay: stagger(0.1), easing: EASE_OUT }); },
      { amount: 0.1 }
    );
  }

  // Meta table rows
  const metaTable = document.querySelector('.doc-meta-table');
  if (metaTable) {
    inView(metaTable,
      () => { animate(metaTable.querySelectorAll('tr'), { opacity: [0, 1], x: [-6, 0] }, { duration: 0.26, delay: stagger(0.05), easing: EASE_OUT }); },
      { amount: 0.1 }
    );
  }

} else {
  // Reduced motion: reveal everything immediately — no animation
  document.documentElement.classList.remove('doc-js');
}

/* ─────────────────────────────────────────────────────────────────────────────
   SMOOTH SCROLL — enhanced anchor navigation
───────────────────────────────────────────────────────────────────────────── */
document.querySelectorAll('a[href^="#"]').forEach(link => {
  link.addEventListener('click', e => {
    const id = link.getAttribute('href').slice(1);
    const target = document.getElementById(id);
    if (!target) return;
    e.preventDefault();
    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
  });
});

/* ─────────────────────────────────────────────────────────────────────────────
   ACTIVE TOC LINK — highlights the current section in the sidebar
───────────────────────────────────────────────────────────────────────────── */
const sections = document.querySelectorAll('.doc-section[id]');
const tocLinks = document.querySelectorAll('.doc-toc__link');

const tocObserver = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (!entry.isIntersecting) return;
    const id = entry.target.id;
    tocLinks.forEach(l => {
      const isActive = l.getAttribute('href') === `#${id}`;
      l.classList.toggle('doc-toc__link--active', isActive);
      // Nudge the newly active link
      if (isActive && !reduced) {
        animate(l, { x: [0, 4, 0] }, { duration: 0.28, easing: 'ease-out' });
      }
    });
  });
}, { rootMargin: '-15% 0px -72% 0px', threshold: 0 });

sections.forEach(s => tocObserver.observe(s));
</script>

</body>
</html>
